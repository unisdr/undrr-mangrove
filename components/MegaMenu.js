/*!
 * This is a UNDRR Mangrove component: https://github.com/unisdr/undrr-mangrove?tab=readme-ov-file
 * Compiled on: 2026-02-13T09:58:11.389Z
 */
/*! For license information please see MegaMenu.js.LICENSE.txt */
import{useEffect as e,useRef as n,useState as t}from"react";var i={9698(e,n){var t=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,n,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==n.key&&(r=""+n.key),"key"in n)for(var a in i={},n)"key"!==a&&(i[a]=n[a]);else i=n;return n=i.ref,{$$typeof:t,type:e,key:r,ref:void 0!==n?n:null,props:i}}n.Fragment=i,n.jsx=r,n.jsxs=r},4848(e,n,t){e.exports=t(9698)}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var t=r[e]={exports:{}};return i[e](t,t.exports,a),t.exports}a.d=(e,n)=>{for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var s=a(4848);function o({section:i,index:r,sectionListRef:a,itemListRef:o}){const[l,c]=t(0),[m,u]=t(0),[d,g]=t([]),f=n(null),p=n(null),h=e=>{if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation()),"ArrowDown"!==e.key&&"Tab"!==e.key||(m<d?.length-1?u(e=>e+1):(u(0),o.current?.[r+1]?.focus())),("ArrowUp"===e.key||e.shiftKey&&"Tab"===e.key)&&(m>0?u(e=>e-1):(o.current?.[r]?.focus(),u(0))),f.current&&("ArrowLeft"===e.key&&u(0),"ArrowRight"===e.key)){const e=p.current,n=e?.querySelector("ul > li > a");if(n){e.setAttribute("tabindex","-1"),n.focus();const t=d.findIndex(e=>e===n);-1!==t&&u(t)}else{p.current?.focus();const e=d.filter(e=>e===p.current);e[0]&&u(d.indexOf(e[0]))}}};return e(()=>{const e=a?.current?.[r]?.querySelectorAll("audio, button, a, canvas, details, iframe, input, select, summary, textarea, video, [tabindex]");g(Array.from(e||[]))},[a,r,l]),e(()=>{d.length>0&&m>=0&&d[m]?.focus()},[m]),(0,s.jsxs)(s.Fragment,{children:[i&&i.items&&(0,s.jsxs)("article",{className:"mg-mega-content | mg-container-full-width","aria-label":"Menu section","aria-live":"polite",tabIndex:0,ref:e=>a.current[r]=e,onKeyDown:h,role:"region",children:[i.bannerHeading&&i.bannerDescription&&i.items&&(0,s.jsxs)("aside",{className:"mg-mega-content__left","aria-label":"Category navigation",ref:f,tabIndex:0,role:"navigation",children:[(0,s.jsxs)("section",{className:"mg-mega-content__banner",children:[(0,s.jsx)("header",{children:i.bannerHeading}),i.bannerDescription.includes("<")?(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:i.bannerDescription}}):(0,s.jsx)("p",{children:i.bannerDescription}),i.bannerButton?.label&&(0,s.jsx)("a",{href:i.bannerButton.url,className:"mg-button mg-button-primary",children:i.bannerButton.label})]}),i.items.length>0&&i.items[0].items&&i.items[0].items.length>0?(0,s.jsx)("ul",{className:"mg-mega-content__section-list",role:"menu","aria-label":"Categories",children:i.items.map((e,n)=>(0,s.jsx)("li",{className:"mg-mega-content__section-list-item",onMouseEnter:()=>c(n),role:"none",children:(0,s.jsx)("a",{className:"mg-mega-content__section-list-link "+(l===n?"mg-mega-content__section-list-link--active":""),href:e.url,"aria-current":l===n?"page":void 0,onFocus:()=>c(n),role:"menuitem","aria-haspopup":e.items&&e.items.length>0?"true":void 0,children:e.title})},n))}):null]}),i.items&&(0,s.jsxs)("section",{className:"mg-mega-content__right","aria-label":"Submenu content",ref:p,tabIndex:0,role:"navigation",children:[(0,s.jsx)("ul",{role:"menu","aria-label":"Submenu items",className:"mg-mega-content__menu--mobile",children:i.items.map((e,n)=>(0,s.jsxs)("li",{role:"none",children:[(0,s.jsx)("a",{href:e.url,role:"menuitem","aria-haspopup":e.items?"true":void 0,children:e.title}),e.items&&e.items.length>0&&(0,s.jsx)("ul",{role:"menu","aria-label":`${e.title} submenu`,children:e.items.map((e,n)=>(0,s.jsxs)("li",{role:"none",children:[(0,s.jsx)("a",{href:e.url,role:"menuitem","aria-haspopup":e.items?"true":void 0,children:e.title}),e.items&&(0,s.jsx)("ul",{role:"menu","aria-label":`${e.title} nested submenu`,children:e.items.map((e,n)=>(0,s.jsx)("li",{role:"none",children:(0,s.jsx)("a",{href:e.url,role:"menuitem",children:e.title})},n))})]},n))})]},n))}),(0,s.jsx)("ul",{role:"menu","aria-label":"Submenu items",className:"mg-mega-content__menu--desktop",children:i.items[l]?.items?i.items[l].items.map((e,n)=>(0,s.jsxs)("li",{role:"none",children:[(0,s.jsx)("a",{href:e.url,role:"menuitem","aria-haspopup":e.items?"true":void 0,children:e.title}),e.items&&(0,s.jsx)("ul",{role:"menu","aria-label":`${e.title} submenu`,children:e.items.map((e,n)=>(0,s.jsx)("li",{role:"none",children:(0,s.jsx)("a",{href:e.url,role:"menuitem",children:e.title})},n))})]},n)):i.items.map((e,n)=>(0,s.jsx)("li",{role:"none",children:(0,s.jsx)("a",{href:e.url,role:"menuitem",children:e.title})},n))},`desktop-menu-${l}`)]})]}),i&&!i.items&&i.bannerDescription&&(0,s.jsx)("article",{className:"mg-mega-content | mg-container-full-width","aria-live":"polite","aria-label":"Submenu item",tabIndex:0,ref:e=>a.current[r]=e,dangerouslySetInnerHTML:{__html:i.bannerDescription},onKeyDown:h})]})}function l({title:e,onMouseEnter:n,activeItem:t,link:i,bannerDescription:r,handleOnKeyDown:a,ref:l,section:c,sectionListRef:m,itemListRef:u,index:d}){let g=d===t;return(0,s.jsxs)("li",{className:"mg-mega-topbar__item "+(g?"mg-mega-topbar__item--active":""),onMouseEnter:c||r?n:void 0,onFocus:n,onKeyDown:a,role:"none",children:[i&&i.url?(0,s.jsx)("a",{className:"mg-mega-topbar__item-link",href:i.url,ref:l,role:"menuitem","aria-haspopup":c&&c.items?"true":void 0,"aria-expanded":g?"true":void 0,children:e}):(0,s.jsx)("button",{className:"mg-mega-topbar__item-link",ref:l,role:"menuitem","aria-haspopup":c&&c.items?"true":void 0,"aria-expanded":g?"true":void 0,children:e}),(0,s.jsx)(o,{section:c,index:d,sectionListRef:m,itemListRef:u})]})}function c({onClick:e,isOpen:n}){return(0,s.jsx)("button",{className:"mg-mega-topbar-mobile__icon-button",onClick:e,"aria-label":"Toggle navigation menu","aria-haspopup":"true",children:(0,s.jsx)("span",{className:"mg-icon "+(n?"mg-icon-angle-circled-left":"mg-icon-menu"),"aria-hidden":"true"})})}function m({handleItemHover:e,toggleShowSidebar:n,showSidebar:t,sections:i,activeItem:r,sectionListRef:a,itemListRef:o}){return(0,s.jsxs)("ul",{className:"mg-mega-topbar | mg-container-full-width",role:"menubar","aria-label":"Main navigation menu",children:[(0,s.jsx)(c,{isOpen:t,onClick:()=>n()}),i.map((n,t)=>(0,s.jsx)(l,{index:t,ref:e=>o.current[t]=e,title:n.title,bannerDescription:n.bannerDescription,link:n.bannerButton,children:n.sections,onMouseEnter:()=>e(t),activeItem:r,section:n,handleOnKeyDown:e=>{((e,n)=>{["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.key)&&e.preventDefault();const t=o?.current;"ArrowLeft"===e.key&&n>=1&&t[n-1].focus(),"ArrowRight"===e.key&&n<t?.length-1&&t[n+1].focus(),"ArrowDown"===e.key&&a?.current?.[n].focus()})(e,t)},sectionListRef:a,itemListRef:o},t))]})}function u({section:e,sectionListRef:n,sectionIndex:t,handleSectionToggle:i,index:r,itemListRef:a,ref:l,handleOnKeyDown:c}){const m=t===r,u=e?.items&&e.items.length>0;return(0,s.jsxs)("li",{className:"mg-mega-sidebar-section",onKeyDown:c,role:"none",children:[u?(0,s.jsxs)("button",{className:"mg-mega-sidebar-section__item",onClick:()=>i(r),"aria-pressed":m,"aria-expanded":m,"aria-haspopup":"true",ref:l,role:"menuitem",children:[(0,s.jsx)("span",{children:e.title}),(0,s.jsx)("span",{className:"mg-icon mg-icon-angle-circled-left","aria-hidden":"true"})]}):(0,s.jsx)("a",{className:"mg-mega-sidebar-section__item",href:e.url||e.bannerButton?.url||"#",ref:l,role:"menuitem",children:(0,s.jsx)("span",{children:e.title})}),u&&m&&(0,s.jsx)(o,{section:e,index:r,sectionListRef:n,itemListRef:a})]})}function d({sections:n,itemListRef:i,sectionListRef:r,open:a}){const[o,l]=t(null);e(()=>{a||l(null)},[a]);const c=e=>{l(e!==o?e:null)};return(0,s.jsx)("div",{className:"mg-mega-mobile-sidebar "+(a?"mg-mega-mobile-sidebar--open":""),role:"dialog","aria-label":"Mobile navigation menu",children:(0,s.jsx)("ul",{className:"mg-mega-sidebar__list",role:"menu","aria-label":"Navigation options",children:n.map((e,n)=>(0,s.jsx)(u,{index:n,section:e,ref:e=>i.current[n]=e,sectionIndex:o,handleSectionToggle:c,sectionListRef:r,itemListRef:i,handleOnKeyDown:e=>((e,n)=>{["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.key)&&e.preventDefault();const t=i?.current;"ArrowDown"===e.key&&n<t?.length-1&&(Number.isInteger(o)?r.current?.[n].focus():t[n+1].focus()),"ArrowUp"===e.key&&n>=1&&t[n-1].focus()})(e,n)},n))})})}const g=({sections:i,delay:r=300,hoverDelay:a=180})=>{const[o,l]=t(!1),[c,u]=t(null),g=n([]),f=n([]),p=n(null),h=n(null);return e(()=>()=>{clearTimeout(p.current),clearTimeout(h.current)},[]),e(()=>{const e=e=>{const n=document.querySelector(".mg-mega-wrapper");n&&!n.contains(e.target)&&u(null)};if(null!==c)return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[c]),(0,s.jsxs)("nav",{className:"mg-mega-wrapper",onMouseLeave:()=>{clearTimeout(h.current),p.current=setTimeout(()=>{u(null)},r)},onKeyDown:e=>{"Escape"===e.key&&u(null)},"aria-label":"Main Navigation",children:[(0,s.jsx)(m,{sections:i,handleItemHover:e=>{clearTimeout(p.current),clearTimeout(h.current),h.current=setTimeout(()=>{u(e)},a)},toggleShowSidebar:()=>l(e=>!e),showSidebar:o,activeItem:c,itemListRef:g,sectionListRef:f}),o&&(0,s.jsx)("button",{className:"mg-mega-mobile-sidebar-overlay","aria-label":"Close mobile navigation",onClick:()=>l(!1)}),(0,s.jsx)(d,{open:o,sections:i,itemListRef:g,sectionListRef:f})]})};export{g as default};