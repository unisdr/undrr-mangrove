import { Meta, Source } from '@storybook/addon-docs/blocks';
import { linkTo } from '@storybook/addon-links';
import LinkTo from '@storybook/addon-links/react';
import TableOfContents from '../Components/TableOfContents/TableOfContents';

<Meta
  title="Getting started/Vanilla HTML and CSS"
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

# Vanilla HTML/CSS integration

The simplest way to use Mangrove - perfect for static sites, legacy projects, or when you want minimal dependencies.

<TableOfContents
  tocData={[
    { id: 'quick-start', text: 'Quick start' },
    { id: 'css-themes', text: 'CSS themes' },
    { id: 'component-reference', text: 'Component reference' },
    { id: 'javascript', text: 'JavaScript' },
    { id: 'undrr-integration', text: 'UNDRR integration' },
    { id: 'best-practices', text: 'Best practices' },
    { id: 'next-steps', text: 'Next steps' },
  ]}
  showNumbers={false}
/>

## Quick start

### 1. Include CSS files

Add these `<link>` tags to your HTML `<head>`:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My UNDRR Site</title>

    <!-- UNDRR Theme (Choose one) -->
    <link
      rel="stylesheet"
      href="https://assets.undrr.org/static/mangrove/1.2.12/css/style.css"
    />

    <!-- Alternative: Prevention Web Theme -->
    <!-- <link rel="stylesheet" href="https://assets.undrr.org/static/mangrove/1.2.12/css/style-preventionweb.css"> -->
  </head>
  <body>
    <!-- Your content here -->

    <!-- Widget loader script -->
    <script
      type="text/javascript"
      src="https://publish.preventionweb.net/widget.js?rand=3d797b"
    ></script>

    <!-- Widget initialization -->
    <script>
      new PW_Widget.initialize({
        contenttype: 'landingpage',
        pageid: '83835',
        includemetatags: false,
        includecss: true,
        suffixID: 'footer',
        activedomain: 'www.undrr.org',
      });
    </script>
  </body>
</html>
```

### 2. Copy HTML Structures

Browse the component library, click the "HTML" tab, and copy the markup:

```html
<!-- Example: Primary Button -->
<a class="mg-button mg-button-primary" role="button" href="#">
  Download Report
</a>
```

### Complete page example

[See on CodePen](https://codepen.io/khawkins98/pen/MYwbKwe) — A working template with header, navigation, hero, tabs, footer, analytics, and messaging.

## CSS themes

Choose the theme that matches your UNDRR property:

**UNDRR Official Theme**

```html
<link
  rel="stylesheet"
  href="https://assets.undrr.org/static/mangrove/1.2.12/css/style.css"
/>
```

**Prevention Web Theme**

```html
<link
  rel="stylesheet"
  href="https://assets.undrr.org/static/mangrove/1.2.12/css/style-preventionweb.css"
/>
```

## Component reference

Quick reference for common CSS classes. See individual component docs for full details.

### Layout and structure

- `mg-container` - Content containers with max-width
- `mg-grid` - Flexible grid system
- `mg-section` - Page sections with spacing

### Typography

- `mg-heading` - Styled headings (h1-h6)
- `mg-paragraph` - Body text with proper spacing
- `mg-link` - Styled links and text links

### Buttons and actions

- `mg-cta-button` - Primary and secondary call-to-action buttons
- `mg-chip` - Small interactive chips
- `mg-share-buttons` - Social sharing buttons

### Forms

- `mg-form` - Form container and styling
- `mg-form__input` - Text inputs
- `mg-form__textarea` - Multi-line text areas
- `mg-form__select` - Dropdown selects

### Content components

- `mg-card` - Content cards (vertical/horizontal)
- `mg-stats-card` - Statistics display cards
- `mg-label` - Content category labels

### Navigation

- `mg-breadcrumb` - Breadcrumb navigation
- `mg-menu` - Primary navigation menus
- `mg-pagination` - Page navigation

## Best practices

### 1. Semantic HTML first

Always use the correct HTML element:

```html
<!-- Good -->
<button class="mg-cta-button">Submit</button>
<nav class="mg-breadcrumb">...</nav>

<!-- Avoid -->
<div class="mg-cta-button">Submit</div>
<div class="mg-breadcrumb">...</div>
```

### 2. Accessibility attributes

Include proper ARIA labels and attributes:

```html
<button class="mg-cta-button" aria-label="Download PDF report">
  <span class="mg-cta-button__text">Download</span>
  <span class="mg-cta-button__icon" aria-hidden="true">↓</span>
</button>
```

### 3. Responsive design

Use responsive utility classes:

```html
<div class="mg-grid mg-grid--1-col mg-grid--md-2-cols mg-grid--lg-3-cols">
  <!-- Content automatically adapts to screen size -->
</div>
```

## JavaScript

Most Mangrove components work without JavaScript. For enhanced interactivity, you have two options.

### Vanilla JS modules

Some components (like Tabs) have lightweight JavaScript modules:

```html
<script type="module">
  import { mgTabs } from 'https://assets.undrr.org/static/mangrove/1.2.12/js/tabs.js';

  document.addEventListener('DOMContentLoaded', () => {
    mgTabs();
  });
</script>
```

### Precompiled React components

For complex interactive components (MegaMenu, charts, maps), use precompiled React bundles without a build process.

**Available components:**

| Component | CDN Path | Use case |
|-----------|----------|----------|
| MegaMenu | `/components/MegaMenu.js` | Full navigation with dropdowns |
| ShareButtons | `/components/ShareButtons.js` | Social sharing |
| BarChart | `/components/BarChart.js` | Data visualization |
| MapComponent | `/components/MapComponent.js` | Interactive maps |
| ScrollContainer | `/components/ScrollContainer.js` | Horizontal scrolling |

React 19 dropped UMD builds, so we use [import maps](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script/type/importmap) with [esm.sh](https://esm.sh/) to provide React dependencies:

```html
<head>
  <!-- Import map for React 19 (must be before any module scripts) -->
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.2.0",
        "react/jsx-runtime": "https://esm.sh/react@19.2.0/jsx-runtime",
        "react-dom": "https://esm.sh/react-dom@19.2.0",
        "react-dom/": "https://esm.sh/react-dom@19.2.0/"
      }
    }
  </script>
  <!--
    Note: react/jsx-runtime is only needed if components use the automatic JSX
    runtime. Many components don't require it. Import maps only trigger network
    requests when code actually imports from that path, so unused entries are harmless.
  -->
</head>
<body>
  <!-- Mount point -->
  <nav data-mg-mega-menu></nav>

  <script type="module">
    import React from 'react';
    import { createRoot } from 'react-dom/client';

    // Load component from CDN
    const MegaMenuModule = await import(
      'https://assets.undrr.org/static/mangrove/1.2.12/components/MegaMenu.js'
    );

    // Unwrap ESM/CJS interop - bundle may be double-wrapped as { default: { default: Component } }
    let MegaMenu = MegaMenuModule?.default ?? MegaMenuModule;
    if (typeof MegaMenu !== 'function' && MegaMenu?.default) {
      MegaMenu = MegaMenu.default;
    }

    // Render the component
    const container = document.querySelector('[data-mg-mega-menu]');
    if (container) {
      const root = createRoot(container);
      root.render(
        React.createElement(MegaMenu, {
          delay: 2000,
          sections: [
            {
              title: 'About',
              bannerHeading: 'About Us',
              bannerDescription: 'Learn more about our organization.',
              items: [
                { title: 'Our Mission', url: '/about/mission' },
                { title: 'Our Team', url: '/about/team' }
              ]
            },
            {
              title: 'Search',
              bannerButton: { url: '/search' }
            }
          ]
        })
      );
    }
  </script>
</body>
```

**Tip:** For debugging, use dev builds by adding `?dev` to esm.sh URLs (e.g., `https://esm.sh/react@19.2.0?dev`).

For most use cases, the vanilla HTML markup (shown in component docs) is simpler. Use precompiled components only when you need:
- Complex interactive behavior (MegaMenu dropdowns, chart interactions)
- Dynamic data loading
- State management

[See complete working example on CodePen](https://codepen.io/khawkins98/pen/MYwbKwe) — includes React MegaMenu, header, hero, tabs, footer, analytics, and messaging.

## UNDRR integration

All UNDRR pages should include analytics and messaging scripts.

### Analytics

Track user behavior with GA4 enhancements:

```html
<script
  src="https://assets.undrr.org/static/analytics/v1.0.0/google_analytics_enhancements.js"
  defer
></script>
```

See [Analytics enhancements](/?path=/docs/getting-started-analytics-enhancements--docs) for full documentation.

### Critical messaging

Receive emergency broadcasts across all UNDRR properties:

```html
<script src="https://messaging.undrr.org/src/undrr-messaging.js" defer></script>
```

Optionally add a container for message placement:

```html
<div class="mg-critical-messaging"></div>
```

See [Critical messaging](/?path=/docs/getting-started-critical-messaging--docs) for full documentation.

## Next steps

- **Browse Components**: Explore the component library in the sidebar
- **Copy HTML**: Use the HTML tab in each component story
- **CDN URLs**: See the [CDN reference](/?path=/docs/getting-started-cdn-reference--docs) for all available assets
- **Customize**: Override CSS variables for theming
- **Upgrade**: Consider [React Integration](/?path=/docs/getting-started-react-integration--docs) for dynamic applications

Need help? Check out [Best Practices](/?path=/docs/getting-started-best-practices--docs) or [Real-world Examples](/?path=/docs/getting-started-examples--docs)!
