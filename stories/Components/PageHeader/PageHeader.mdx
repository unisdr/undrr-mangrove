import { Meta, Story, Canvas } from '@storybook/blocks';
import { PageHeader } from './PageHeader';
import * as PageHeaderStories from './PageHeader.stories';

<Meta of={PageHeaderStories} />

# Page Header

The PageHeader component provides a comprehensive header with UNDRR branding, navigation elements, and visual decoration. It includes the UNDRR logo, language switcher, and the distinctive colored stripe that serves as visual branding. It can also render just the decoration stripe when used in decoration-only mode.

### Overview

The PageHeader component displays a complete header structure that includes:
- A dark toolbar section with UNDRR logo and language switcher
- Google Analytics integration with proper data attributes
- Responsive design that adapts to different screen sizes
- The signature four-colored decorative stripe
- Option to render only the decoration stripe for lightweight branding

#### When to use:

* Use at the top of all UNDRR website pages to establish brand presence
* Use to provide consistent navigation and language switching functionality
* Use to maintain visual consistency across the UNDRR digital ecosystem
* Use when you need Google Analytics tracking on header interactions
* Use the decoration-only variant when you only need the brand stripe without navigation

### Formatting

#### Default

The PageHeader component renders as a comprehensive header with the UNDRR logo (sourced from [https://assets.undrr.org/static/logos/undrr/undrr-logo-horizontal.svg](https://assets.undrr.org/static/logos/undrr/undrr-logo-horizontal.svg)), language switcher, and colored decoration stripe.

<Canvas>
  <Story of={PageHeaderStories.Default} />
</Canvas>

#### Decoration Only

The component can render only the colored decoration stripe when you need just the visual branding element without the full header functionality.

<Canvas>
  <Story of={PageHeaderStories.DecorationOnly} />
</Canvas>

#### With Custom Logo

The component supports custom logo URLs and alt text for different implementations.

<Canvas>
  <Story of={PageHeaderStories.WithCustomLogo} />
</Canvas>

#### With Custom Languages

The language switcher can be configured with different language options.

<Canvas>
  <Story of={PageHeaderStories.WithCustomLanguages} />
</Canvas>

#### With Custom Class

The component supports additional CSS classes for custom styling.

<Canvas>
  <Story of={PageHeaderStories.WithCustomClass} />
</Canvas>

### Content

The PageHeader component includes several content areas:

**UNDRR Logo Section:**
- Displays the official UNDRR horizontal logo
- Logo is linked to the homepage (configurable)
- Responsive design with mobile-optimized sizing

**Language Switcher:**
- Dropdown with available languages (English, Spanish, Arabic by default)
- Maintains Drupal form structure for backend integration
- Includes all necessary data attributes for form processing

**Visual Decoration:**
- Four colored stripes representing UNDRR brand colors:
  - Red: `$sendai-red-900` (#c10920)
  - Purple: `$sendai-purple-900` (#962987)
  - Orange: `$sendai-orange-900` (#eb752a)
  - Teal: `$sendai-turquoise-900` (#00afae)

### Behaviors

#### States

The PageHeader component maintains static display with interactive elements:

1. **Logo**: Clickable link to homepage (default variant only)
2. **Language Switcher**: Interactive dropdown for language selection (default variant only)
3. **Responsive**: Adapts logo size on mobile devices (≤500px)
4. **Decoration Only**: Renders only the colored stripe when variant is set to 'decoration-only'

#### Google Analytics Integration

The component includes proper data attributes for Google Analytics tracking:
- `data-vf-google-analytics-region="undrr-black-bar"` on the toolbar wrapper
- Preserves all original Drupal data attributes for form processing

### Usage

#### React applications

To use the PageHeader component in your React application:

1. Import the component:
   ```jsx
   import { PageHeader } from './path/to/PageHeader';
   ```

2. Basic usage:
   ```jsx
   <PageHeader />
   ```

3. Decoration only usage:
   ```jsx
   <PageHeader variant="decoration-only" />
   ```

4. With custom configuration:
   ```jsx
   <PageHeader
     logoUrl="https://assets.undrr.org/static/logos/undrr/undrr-logo-horizontal.svg"
     logoAlt="UNDRR Logo"
     homeUrl="https://www.undrr.org"
     languages={[
       { value: 'en', label: 'English', selected: true },
       { value: 'es', label: 'Español' },
       { value: 'fr', label: 'Français' }
     ]}
   />
   ```

#### Vanilla HTML/CSS

For non-React applications, use these HTML structures:

**Full Header:**
```html
<header id="header" class="mg-page-header">
    <!-- Decoration stripe -->
    <div class="mg-page-header__decoration">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
    <div class="mg-page-header__toolbar-wrapper" data-vf-google-analytics-region="undrr-black-bar">
    <div class="mg-page-header__container | mg-container">
      <div class="mg-page-header__region mg-page-header__region--toolbar">

        <!-- UNDRR Logo Section -->
        <section id="block-undrrlogo" class="mg-page-header__block mg-page-header__block--logo ">
          <a href="/">
            <img alt="UNDRR Logo" src="https://assets.undrr.org/static/logos/undrr/undrr-logo-horizontal.svg"
                 width="324" height="47" title="UNDRR Logo" class="mg-page-header__logo-img">
          </a>
        </section>

        <!-- Language Dropdown Section -->
        <section id="block-languagedropdownswitcher" class="mg-page-header__block mg-page-header__block--language ">
          <form class="mg-page-header__lang-form lang-dropdown-form" action="/" method="post">
            <div class="mg-page-header__form-item">
              <label for="edit-lang-dropdown-select" class="mg-u-sr-only">Select your language</label>
              <div class="mg-page-header__select-wrapper">
                <select style="width:165px" class="mg-page-header__select" id="edit-lang-dropdown-select">
                  <option value="en" selected>English</option>
                  <option value="es">Spanish</option>
                  <option value="ar">Arabic</option>
                </select>
              </div>
            </div>
          </form>
        </section>

      </div>
    </div>
  </div>
</header>
```

**Decoration Only:**
```html
<div class="mg-page-header__decoration">
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</div>
```

### CSS and JS References

#### CSS:
Required CSS files for the component styling:
* Component-specific styles: `page-header.scss`
* Includes responsive breakpoints and mobile optimizations
* Background image reference: `//www.undrr.org/themes/custom/undrr_common/images/toolbar-background.png`
* Uses Sendai Framework color variables from `_variables.scss`

#### JS:
* No JavaScript dependencies required for basic functionality
* Language switcher form can be enhanced with JavaScript for dynamic behavior

### Accessibility

The PageHeader component follows accessibility best practices:

* Uses semantic `<header>` element for proper document structure (default variant)
* Uses `<div>` element for decoration-only variant as it's purely decorative
* Includes proper `<section>` elements for each functional area
* Language switcher has proper form labeling with `sr-only` class for screen readers
* Logo image includes proper alt text and title attributes
* Maintains keyboard navigation for all interactive elements
* Color contrast meets WCAG AA standards

### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| variant | String | 'default' | Component variant ('default' for full header, 'decoration-only' for stripe only) |
| className | String | undefined | Additional CSS classes to apply |
| logoUrl | String | 'https://assets.undrr.org/static/logos/undrr/undrr-logo-horizontal.svg' | URL for the UNDRR logo image (ignored in decoration-only variant) |
| logoAlt | String | 'UNDRR Logo' | Alt text for the logo image (ignored in decoration-only variant) |
| logoTitle | String | 'UNDRR Logo' | Title attribute for the logo image (ignored in decoration-only variant) |
| homeUrl | String | '/' | URL for the logo link (ignored in decoration-only variant) |
| languages | Array | [English, Spanish, Arabic] | Array of language objects (ignored in decoration-only variant) |
| ...args | Object | {} | Additional props passed to the root element |

### Integration Notes

**Drupal Integration:**
- Maintains all original Drupal class names and data attributes
- Form structure preserves backend processing capabilities
- Hidden form fields included for proper form submission

**Google Analytics:**
- Includes `data-vf-google-analytics-region="undrr-black-bar"` for tracking
- Preserves all data attributes required for analytics integration

**Decoration-Only Variant:**
- Renders as a simple `<div>` element with decoration styling
- Lightweight option for brand consistency without navigation
- Useful for footers, section dividers, or other decorative contexts

### Changelog

1.0 — Initial release with decoration stripe, UNDRR logo, language switcher, Google Analytics integration, and decoration-only variant