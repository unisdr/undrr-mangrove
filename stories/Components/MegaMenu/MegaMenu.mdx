import { Meta, Story, Canvas } from '@storybook/blocks';
import * as MegaMenuStories from './MegaMenu.stories';

# Mega menu

The Mega Menu component provides a navigation menu with multiple levels and sections.

> **Note:** This component is currently in beta and subject to breaking changes in future releases.

<Meta of={MegaMenuStories} />

## Default

A basic mega menu implementation with default settings.

<Canvas of={MegaMenuStories.Default} meta={MegaMenuStories} />

## With custom delay

A mega menu with customized hover delay timing.

<Canvas of={MegaMenuStories.WithCustomDelay} meta={MegaMenuStories} />

## RTL (Right-to-Left)

The mega menu fully supports RTL languages with automatic layout mirroring.

<Canvas of={MegaMenuStories.RTL} meta={MegaMenuStories} />

## Usage

```
import { MegaMenu } from '@components';

const MyComponent = () => (
  <MegaMenu items={menuItems} />
);
```

## Props

| Prop      | Type   | Default | Description                                          |
| --------- | ------ | ------- | ---------------------------------------------------- |
| items     | array  | []      | Array of menu items to display                       |
| delay     | number | 300     | Delay in milliseconds before showing/hiding submenus |
| className | string | ''      | Additional CSS class names                           |

### Changelog

- 0.7
  - **Major refactor**: Converted to mobile-first, CSS-driven responsive architecture
  - Replaced custom JavaScript breakpoint detection with native CSS media queries for improved performance
  - Eliminated all window resize event listeners (zero JavaScript resize handlers)
  - Added comprehensive RTL (Right-to-Left) support using CSS logical properties
  - Mobile and desktop menu structures now both render; CSS controls visibility
  - Tablet devices (480px-1024px) now display hamburger menu instead of cramped desktop layout
  - Removed dead code: `useBreakpoint` hook, `IconButton`, and `RecursiveMegaMenuItem` components
  - Updated breakpoint handling: `$mg-breakpoint-mobile` (480px) and `$mg-breakpoint-tablet` (1024px)
  - Chevron indicators, borders, and sidebar positions automatically flip for RTL languages
  - Improved separation of concerns: CSS handles presentation, JavaScript handles behavior only
  - Added RTL story variant to demonstrate right-to-left language support
- 0.6
  - UX improvements to better indicate the presence of submenus
  - Aesthetic updates to align with UNDRR branding direction, with less prominent use of the blue
- 0.5
  - Mobile sidebar now slides down from the top instead of in from the right
  - Added backdrop overlay that closes the menu when users tap outside the sidebar
  - Third-level submenu links are always visible on mobile for quicker navigation
  - Replaced generic `.sidebar` selectors with `mg-` prefixed class names for consistency
  - Updated mobile toggle button (`mg-mega-topbar-mobile__icon-button`) styling and visibility while open
  - Tweaked colours and hover states to match interactive palette
- 0.4
  - Auto-balance column heights in mega menu content areas
  - Keep sub-items grouped together to prevent splitting across columns
  - Updated font weights for better visual hierarchy (bold main items, normal sub-items)
  - Improved layout efficiency with CSS column properties
- 0.3
  - Enhanced mobile menu accessibility and UX
  - Improved positioning and styling of mobile menu elements
  - Added support for fa-menu icon class for mobile toggle
  - Fixed z-index and visibility issues in mobile view
- 0.2
  - Added support for more diverse menu data structrues
  - Assorted theme level integration
- 0.1
  - Initial release
