import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { StatsCard } from './StatsCard';
import * as StatsCardStories from './StatsCard.stories';

<Meta of={StatsCardStories} />

# Stats card

A flexible component for displaying statistics and key metrics in an engaging, scannable format.

## Overview

The Stats card component highlights important statistics, metrics, or "by the numbers" information. It supports 1-3 statistics in a responsive grid layout with optional icons, dual labels, descriptions, and clickable cards.

### Key features

- **Clickable cards**: Make entire stat cards clickable with the `link` prop
- **Dual labels**: Support for both top and bottom labels
- **Icon support**: Optional icons via CSS class (e.g., Font Awesome, custom icon fonts)
- **Multiple variants**: Default, compact, and highlighted styles
- **Responsive**: Mobile-first grid layout
- **Accessible**: Semantic HTML with proper ARIA attributes
- **RTL support**: Full right-to-left language support

## Default

<Canvas of={StatsCardStories.Default} />

The default story shows three statistics with dual labels (top and bottom).

## With icons

<Canvas of={StatsCardStories.WithIcons} />

Icons add visual interest and help users quickly identify stat categories. The `icon` prop accepts any CSS class string which is applied to a `<span>` element, so you can use Font Awesome, custom icon fonts, or any CSS-based icon system.

## Variants

### Compact

<Canvas of={StatsCardStories.Compact} />

Use the compact variant when space is limited.

### Highlighted

<Canvas of={StatsCardStories.Highlighted} />

The highlighted variant emphasizes stats with a colored border accent.

### Negative

<Canvas of={StatsCardStories.Negative} />

The negative variant uses white text and borders for use on dark backgrounds.

## Linked stats

<Canvas of={StatsCardStories.Linked} />

Make entire stat cards clickable by adding a `link` prop. The cursor changes to a pointer on hover to indicate interactivity.

## Component props

### StatsCard

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `title` | string | - | Optional heading for the stats section |
| `stats` | array | `[]` | Array of stat objects (see below) |
| `variant` | string | `'default'` | Visual variant: `'default'`, `'compact'`, `'highlighted'`, or `'negative'` |
| `className` | string | - | Additional CSS class names |

### Stat object

| Prop | Type | Required | Description |
|------|------|----------|-------------|
| `value` | string/number | Yes | The main statistic value (e.g., "1,500+", "45%") |
| `bottomLabel` | string | No | Label that appears below the value |
| `label` | string | No | Optional label above the value |
| `icon` | string | No | Optional icon class (e.g., "mg-icon fa-globe") |
| `summaryText` | string | No | Optional descriptive text (supports inline HTML links) |
| `link` | string | No | URL to make the entire stat card clickable |

## Usage

```jsx
<StatsCard
  title="Sendai Framework Progress"
  stats={[
    {
      label: "Target A",
      value: "45%",
      bottomLabel: "Mortality reduction",
      summaryText: "Decrease in disaster mortality rates.",
    },
    {
      label: "Target B",
      value: "2.3M",
      bottomLabel: "People affected",
      summaryText: "Reduction in affected people per 100,000.",
    },
  ]}
/>
```

### Linked stats

```jsx
<StatsCard
  stats={[
    {
      value: "1,500+",
      bottomLabel: "Cities enrolled",
      summaryText: "Click to view all cities.",
      link: "https://mcr2030.undrr.org/cities",
    },
  ]}
/>
```

## Accessibility

- Semantic HTML with `<section>`, `<article>`, and `<data>` elements
- Proper `aria-label` on the section
- Icons marked with `aria-hidden="true"`
- Focus-visible styles for keyboard navigation
- Respects `prefers-reduced-motion`

## Changelog

1.0 â€” Initial component release
