/* content-card start */
// $colors: (
//   'yellow': $mg-color-yellow,
//   'red': $mg-color-red-900,
//   'green': $mg-color-green,
//   'blue': $mg-color-azure,
//   'gray': $mg-color-neutral-100,
// );
// $backgroundcolors: (
//   'yellow': $mg-color-yellow-light,
//   'red': $mg-color-red-600,
//   'green': $mg-color-green-light,
//   'blue': $mg-color-azure-light,
//   'gray': $mg-color-neutral-100,
// );

// MG CARD using CSS GRID
.mg-card {
  display: inline-block;
  position: relative;
  margin-bottom: $mg-spacing-100;

  // Vertical CARD
  &__vc {
    display: grid;
    gap: $mg-spacing-50;

    .mg-card__visual {
      aspect-ratio: 16/9;
      overflow: hidden;
    }
  }

  // Horizontal CARD
  &__hc {
    color: $mg-color-neutral-800;
    display: grid;
    grid-template-columns: 1fr;
    gap: $mg-spacing-100;

    .mg-card__content {
      grid-column: 1 / 3;
      grid-row: 2 / 3;

      // If there is no image, make the text area full width
      &:only-child {
        grid-column: 1 / -1;
      }

      @media (min-width: $mg-breakpoint-mobile) {
        grid-column: 2 / 4;
        grid-row: 1 / 2;
      }
    }

    &:has(.mg-card__visual) {
      grid-template-rows: 300px 1fr auto;

      @media (min-width: $mg-breakpoint-mobile) {
        grid-template-columns: 160px 1fr;
        grid-template-rows: 1fr auto;
      }

      @media (min-width: $mg-breakpoint-tablet) {
        grid-template-columns: 330px 1fr;
      }
    }
  }

  &__hc.mg-card-book__hc {
    .mg-card__visual {
      align-self: flex-start;
      border: 1px solid rgba($mg-color-neutral-600, 0.2);
      max-width: 200px;
      overflow: hidden;

      @media (min-width: $mg-breakpoint-mobile) {
        max-width: unset;
      }

    }

    &:has(.mg-card__visual) {
      grid-template-rows: unset;
      gap: $mg-spacing-100 0;

      @media (min-width: $mg-breakpoint-mobile) {
        grid-template-columns: 160px 1fr;
        grid-template-rows: 1fr auto;
      }
    }
  }

  // Main Card css
  &__visual {
    align-items: flex-end;
    display: flex;
    justify-content: flex-end;
  }

  &__image {
    object-fit: cover;
    width: 100%;
    align-self: center;
  }

  &__label {
    color: $mg-color-label;
    cursor: pointer;
    display: inline-block;
    font-size: $mg-font-label;
    margin-right: $mg-spacing-50;

    &:hover {
      color: $mg-color-label;
    }
  }

  &__title {
    font-size: $mg-font-size-500;
    font-weight: bold;
    line-height: $mg-font-line-height-500;
    padding-bottom: $mg-spacing-75;
    padding-top: $mg-spacing-100;

    a {
      color: $mg-color-text;
      cursor: pointer;
      display: inline-block;
    }

    .active {
      background: $mg-color-neutral-50;
      font-weight: bold;
    }
  }

  &__title a::after {
    bottom: 0;
    content: "";
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    z-index: 100;
  }
}

.mg-card__summary {
  padding-bottom: $mg-spacing-50;
}

.mg-card__summary a,
.mg-card__text-link {
  color: $mg-color-interactive;
}

.mg-card__summary a,
.mg-card__text-link,
.mg-card__label,
.mg-card .mg-button {
  position: relative;
  z-index: 101;
}

.mg-card__summary a:hover,
.mg-card__text-link:hover {
  text-decoration: underline;
}

// Book Card variant
.mg-card__book {
  max-width: 200px;

  .mg-card__visual {
    aspect-ratio: 3/4;
    border: 1px solid rgba($mg-color-neutral-600, 0.2);
  }
  .mg-card__title {
    font-size: $mg-font-size-300;
    padding-top: $mg-spacing-25;
  }
}

@media (min-width: $mg-breakpoint-desktop) {
  .mg-card__book {
    max-width: 400px;
  }
}

// END of CARD

// Icon Card variant
// Uses shared .mg-card__visual, .mg-card__content, .mg-card__title, etc.
// RTL is automatic via [dir="rtl"] - no manual alignment prop needed
.mg-card__icon {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: $mg-spacing-100;
  max-width: 300px;

  @media (min-width: $mg-breakpoint-mobile) {
    max-width: 400px;
  }

  @media (min-width: $mg-breakpoint-desktop) {
    max-width: 500px;
  }

  // Reuse shared visual container with icon-specific sizing
  .mg-card__visual {
    flex-shrink: 0;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    overflow: visible;
    container-type: inline-size; // Enable container queries for icon scaling
    aspect-ratio: 3/2; // Default aspect ratio

    // Adjust aspect ratio based on icon/image scale - smaller = wider
    &:has(.mg-card__image--small),
    &:has(.mg-card__icon-wrap--small) {
      aspect-ratio: 5/1;
    }

    &:has(.mg-card__image--medium),
    &:has(.mg-card__icon-wrap--medium) {
      aspect-ratio: 3/1;
    }

    &:has(.mg-card__image--large),
    &:has(.mg-card__icon-wrap--large) {
      aspect-ratio: 2/1;
    }

    &:has(.mg-card__image--full),
    &:has(.mg-card__icon-wrap--full) {
      aspect-ratio: 1/1;
    }
  }

  // Icon-specific image sizing (smaller than standard cards)
  .mg-card__image {
    max-width: 100%;
    height: auto;
    object-fit: contain;

    // Image scale variants - min-width ensures small images scale up
    &--small {
      width: 72px;
      min-width: 72px;
      height: auto;
    }

    &--medium {
      width: 50%;
      min-width: 50%;
      height: auto;
    }

    &--large {
      width: 75%;
      min-width: 75%;
      height: auto;
    }

    &--full {
      width: 100%;
      min-width: 100%;
      height: auto;
    }
  }

  // Icon class container - uses container query units to scale like images
  .mg-card__icon-wrap {
    color: $mg-color-interactive;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: flex-start;

    // Support for nested icon elements (Font Awesome, etc.)
    i,
    span {
      display: block;
      font-size: inherit;
    }

    // Icon scale variants - uses cqi (container query inline) to scale with container
    // Font-size is ~80% of width to leave some breathing room
    &--small .mg-icon {
      width: 72px;
      min-width: 72px;
      font-size: 58px;
    }

    &--medium .mg-icon {
      font-size: 50cqi;
    }

    &--large .mg-icon {
      font-size: 80cqi;
    }

    &--full .mg-icon {
      font-size: 100cqi;
    }

    .mg-icon {
      margin: 0 auto;
    }
  }

  // Visual link for logo cards (srOnlyTitle) - stretched link pattern
  .mg-card__visual-link {
    display: block;
    transition: opacity 200ms ease;
    width: 100%;

    &::after {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 1;
    }

    &:hover {
      opacity: 0.75;
    }

    &:focus-visible {
      outline: none;

      &::after {
        outline: 2px solid $mg-color-interactive;
        outline-offset: 2px;
      }
    }
  }

  // Reuse shared content container
  .mg-card__content {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .mg-card__title {
    padding-top: 0;

    h3 {
      margin: 0;
      font-size: $mg-font-size-500;
      font-weight: bold;
      line-height: $mg-font-line-height-500;

      a {
        color: $mg-color-text;
        text-decoration: none;

        &:hover {
          text-decoration: underline;
        }

        &:focus-visible {
          outline: 2px solid $mg-color-interactive;
          outline-offset: 2px;
          border-radius: 2px;
        }
      }
    }
  }

  .mg-card__cta {
    margin-top: auto;
    padding-top: $mg-spacing-100;
  }

  .mg-card__link {
    margin-top: auto;
    padding-top: $mg-spacing-75;
    margin-bottom: 0;

    a {
      color: $mg-color-interactive;
      text-decoration: none;
      position: relative;
      z-index: 101;

      &:hover {
        text-decoration: underline;
      }

      &:focus-visible {
        outline: 2px solid $mg-color-interactive;
        outline-offset: 2px;
        border-radius: 2px;
      }
    }
  }

  // Centered variant
  &--centered {
    align-items: center;
    text-align: center;

    .mg-card__visual {
      justify-content: center;
    }

    .mg-card__content {
      align-items: center;
    }
  }

  // Negative variant (for dark backgrounds)
  &--negative {
    .mg-card__icon-wrap {
      color: $mg-color-white;
    }

    .mg-card__label {
      color: rgba($mg-color-white, 0.8);
    }

    .mg-card__title h3,
    .mg-card__title h3 a {
      color: $mg-color-white;
    }

    .mg-card__summary {
      color: rgba($mg-color-white, 0.8);
    }

    .mg-card__link a {
      color: $mg-color-white;

      &:focus-visible {
        outline-color: $mg-color-white;
      }
    }
  }
}

// RTL support for Icon Card
[dir="rtl"] {
  .mg-card__icon {
    // Centered stays centered in RTL
    &--centered {
      text-align: center;

      .mg-card__visual {
        justify-content: center;
      }

      .mg-card__content {
        align-items: center;
      }
    }
  }
}

/* content-card end */
